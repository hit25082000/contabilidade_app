import './polyfills.server.mjs';
import{d as ce,e as de,f as ue}from"./chunk-GYPDQQC4.mjs";import{a as ne,b as ie}from"./chunk-WUOZ2HTF.mjs";import{f as U,g as W,h as X,j as H,l as K,m as Q,n as Y,o as Z,p as me,q as se}from"./chunk-33JHTNE7.mjs";import{A as oe,B as ae,D as le,d as T,e as s,g as F,h as I,k as R,m as k,n as D,p as L,r as A,s as G,t as q,u as B}from"./chunk-BUTXK5IO.mjs";import{c as pe}from"./chunk-VCIU2FCS.mjs";import{ia as $,ja as ee,ka as te,la as re}from"./chunk-3JIOLUJM.mjs";import"./chunk-NYVSB7IF.mjs";import"./chunk-QUFSXYYJ.mjs";import{$ as g,Ab as u,Ad as E,Bd as V,Fd as O,Ia as l,Ib as P,Jb as c,Je as j,Ke as J,Lc as N,Pa as y,Rc as M,Va as z,Yb as w,bb as i,ja as x,ka as h,pb as t,qb as r,rb as p,vb as _,yb as v}from"./chunk-S6SYAES4.mjs";import"./chunk-RZ33QJ22.mjs";import"./chunk-S6KH3LOX.mjs";function ge(o,a){if(o&1&&p(0,"nz-alert",40),o&2){let e=u();i("nzMessage",e.error())}}function ze(o,a){o&1&&(t(0,"nz-form-item")(1,"nz-form-control",41)(2,"nz-input-group",42),p(3,"input",43),r()()())}function Ce(o,a){if(o&1){let e=_();t(0,"span",44),v("click",function(){x(e);let m=u();return h(m.passwordVisible=!m.passwordVisible)}),r()}if(o&2){let e=u();i("nzType",e.passwordVisible?"eye-invisible":"eye")}}function xe(o,a){if(o&1){let e=_();t(0,"span",44),v("click",function(){x(e);let m=u();return h(m.confirmPasswordVisible=!m.confirmPasswordVisible)}),r()}if(o&2){let e=u();i("nzType",e.confirmPasswordVisible?"eye-invisible":"eye")}}var fe=class o{authService=g(pe);authStore=g(O);router=g(E);fb=g(L);registerForm;submitted=!1;passwordVisible=!1;confirmPasswordVisible=!1;isLoading=this.authStore.isLoading;error=this.authStore.error;constructor(){this.registerForm=this.fb.group({nome_completo:["",[s.required]],email:["",[s.required,s.email]],cpf_cnpj:["",[s.required]],role:["cliente",[s.required]],telefone:["",[s.required]],crc:[""],password:["",[s.required,s.minLength(6)]],confirmPassword:["",[s.required]],termos:[!1,[s.requiredTrue]]},{validators:this.passwordMatchValidator}),this.registerForm.get("role")?.valueChanges.subscribe(a=>{let e=this.registerForm.get("crc");a==="contador"?e?.setValidators([s.required]):e?.clearValidators(),e?.updateValueAndValidity()})}passwordMatchValidator(a){let e=a.get("password")?.value,n=a.get("confirmPassword")?.value;return e!==n?(a.get("confirmPassword")?.setErrors({mismatch:!0}),{mismatch:!0}):null}onSubmit(){if(this.submitted=!0,this.registerForm.invalid){Object.values(this.registerForm.controls).forEach(f=>{f.invalid&&(f.markAsDirty(),f.updateValueAndValidity({onlySelf:!0}))});return}let{email:a,password:e,nome_completo:n,cpf_cnpj:m,role:d,telefone:b,crc:C}=this.registerForm.value,S={nome_completo:n,cpf_cnpj:m,role:d,telefone:b,metadata:{}};d==="contador"&&C&&(S.metadata={crc:C}),this.authService.register(a,e,S).subscribe({next:f=>{f.user?.role==="contador"?this.router.navigateByUrl("/contador"):this.router.navigateByUrl("/cliente")},error:()=>{this.submitted=!1}})}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=y({type:o,selectors:[["app-register"]],decls:63,vars:14,consts:[["suffixPassword",""],["suffixConfirm",""],[1,"register-container"],["nz-row","","nzJustify","center","nzAlign","middle"],["nz-col","",3,"nzXs","nzSm","nzMd","nzLg"],[1,"register-card",3,"nzBordered"],[1,"logo-container"],["nz-icon","","nzType","audit","nzTheme","outline",1,"logo-icon"],[1,"app-name"],[1,"register-title"],[1,"register-subtitle"],["nzType","error","nzShowIcon","","class","mb-4",3,"nzMessage",4,"ngIf"],["nz-form","",1,"register-form",3,"ngSubmit","formGroup"],["nzErrorTip","Por favor, selecione seu tipo de perfil"],["formControlName","role","nzPlaceHolder","Selecione seu perfil",1,"full-width"],["nzValue","cliente","nzLabel","Cliente"],["nzValue","contador","nzLabel","Contador"],["nzErrorTip","Por favor, insira seu nome completo"],["nzPrefixIcon","user"],["type","text","nz-input","","formControlName","nome_completo","placeholder","Nome Completo"],["nzErrorTip","Por favor, insira um email v\xE1lido"],["nzPrefixIcon","mail"],["type","email","nz-input","","formControlName","email","placeholder","Email"],["nzErrorTip","Por favor, insira um CPF/CNPJ v\xE1lido"],["nzPrefixIcon","idcard"],["type","text","nz-input","","formControlName","cpf_cnpj","placeholder","CPF/CNPJ"],["nzErrorTip","Por favor, insira um telefone v\xE1lido"],["nzPrefixIcon","phone"],["type","text","nz-input","","formControlName","telefone","placeholder","Telefone"],[4,"ngIf"],["nzErrorTip","A senha deve ter pelo menos 6 caracteres"],[3,"nzSuffix"],["nz-input","","formControlName","password","placeholder","Senha",3,"type"],["nzErrorTip","As senhas n\xE3o coincidem"],["nz-input","","formControlName","confirmPassword","placeholder","Confirmar Senha",3,"type"],["nz-checkbox","","formControlName","termos",1,"terms-text"],["href","#"],["nz-button","","nzType","primary","nzBlock","",1,"register-button",3,"nzLoading","disabled"],[1,"login-link"],["routerLink","/auth/login"],["nzType","error","nzShowIcon","",1,"mb-4",3,"nzMessage"],["nzErrorTip","Por favor, insira seu registro CRC"],["nzPrefixIcon","solution"],["type","text","nz-input","","formControlName","crc","placeholder","Registro CRC"],["nz-icon","",3,"click","nzType"]],template:function(e,n){if(e&1){let m=_();t(0,"div",2)(1,"div",3)(2,"div",4)(3,"nz-card",5)(4,"div",6),p(5,"span",7),t(6,"h1",8),c(7,"Contabilidade App"),r()(),t(8,"h2",9),c(9,"Criar Conta"),r(),t(10,"p",10),c(11,"Preencha os dados abaixo para se cadastrar"),r(),z(12,ge,1,1,"nz-alert",11),t(13,"form",12),v("ngSubmit",function(){return x(m),h(n.onSubmit())}),t(14,"nz-form-item")(15,"nz-form-control",13)(16,"nz-select",14),p(17,"nz-option",15)(18,"nz-option",16),r()()(),t(19,"nz-form-item")(20,"nz-form-control",17)(21,"nz-input-group",18),p(22,"input",19),r()()(),t(23,"nz-form-item")(24,"nz-form-control",20)(25,"nz-input-group",21),p(26,"input",22),r()()(),t(27,"nz-form-item")(28,"nz-form-control",23)(29,"nz-input-group",24),p(30,"input",25),r()()(),t(31,"nz-form-item")(32,"nz-form-control",26)(33,"nz-input-group",27),p(34,"input",28),r()()(),z(35,ze,4,0,"nz-form-item",29),t(36,"nz-form-item")(37,"nz-form-control",30)(38,"nz-input-group",31),p(39,"input",32),r(),z(40,Ce,1,1,"ng-template",null,0,w),r()(),t(42,"nz-form-item")(43,"nz-form-control",33)(44,"nz-input-group",31),p(45,"input",34),r(),z(46,xe,1,1,"ng-template",null,1,w),r()(),t(48,"nz-form-item")(49,"nz-form-control")(50,"label",35),c(51," Li e concordo com os "),t(52,"a",36),c(53,"Termos de Uso"),r(),c(54," e "),t(55,"a",36),c(56,"Pol\xEDtica de Privacidade"),r()()()(),t(57,"button",37),c(58," Criar Conta "),r(),t(59,"div",38),c(60," J\xE1 tem uma conta? "),t(61,"a",39),c(62,"Fa\xE7a login"),r()()()()()()()}if(e&2){let m,d,b=P(41),C=P(47);l(2),i("nzXs",24)("nzSm",24)("nzMd",20)("nzLg",16),l(),i("nzBordered",!1),l(9),i("ngIf",n.error()),l(),i("formGroup",n.registerForm),l(22),i("ngIf",((m=n.registerForm.get("role"))==null?null:m.value)==="contador"),l(3),i("nzSuffix",b),l(),i("type",n.passwordVisible?"text":"password"),l(5),i("nzSuffix",C),l(),i("type",n.confirmPasswordVisible?"text":"password"),l(12),i("nzLoading",n.isLoading())("disabled",n.registerForm.invalid||!((d=n.registerForm.get("termos"))!=null&&d.value))}},dependencies:[M,N,A,R,T,F,I,k,D,V,H,q,G,W,U,X,Z,K,Y,Q,re,te,$,ee,ie,ne,ae,oe,se,me,J,j,B,le,ue,ce,de],styles:[".register-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f0f2f5;padding:12px}.register-card[_ngcontent-%COMP%]{margin:0 auto;max-width:100%;border-radius:8px;box-shadow:0 2px 8px #00000017}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px}.logo-icon[_ngcontent-%COMP%]{font-size:32px;color:#1890ff}.app-name[_ngcontent-%COMP%]{font-size:20px;color:#000000d9;margin:8px 0}.register-title[_ngcontent-%COMP%]{font-size:20px;text-align:center;margin-bottom:4px}.register-subtitle[_ngcontent-%COMP%]{font-size:14px;text-align:center;color:#00000073;margin-bottom:24px}.register-form[_ngcontent-%COMP%]{max-width:100%}.full-width[_ngcontent-%COMP%]{width:100%}nz-form-item[_ngcontent-%COMP%]{margin-bottom:16px}.terms-text[_ngcontent-%COMP%]{font-size:12px;line-height:1.5;display:block}.register-button[_ngcontent-%COMP%]{margin:24px 0 16px}.login-link[_ngcontent-%COMP%]{text-align:center;font-size:14px}[_nghost-%COMP%]     .ant-input-prefix{margin-right:8px}[_nghost-%COMP%]     .ant-form-item-explain{font-size:12px}[_nghost-%COMP%]     .ant-card-body{padding:16px}[_nghost-%COMP%]     .ant-input{padding:4px 11px}[_nghost-%COMP%]     .ant-select-selector{height:32px!important}[_nghost-%COMP%]     .ant-form-item-control-input{min-height:32px}@media (max-width: 480px){.register-container[_ngcontent-%COMP%]{padding:8px}.register-card[_ngcontent-%COMP%]{box-shadow:none}.terms-text[_ngcontent-%COMP%]{font-size:11px}[_nghost-%COMP%]     .ant-card-body{padding:12px}[_nghost-%COMP%]     .ant-form-item{margin-bottom:12px}}@media (min-width: 481px){.register-card[_ngcontent-%COMP%]{min-width:380px}}"]})};export{fe as RegisterComponent};
