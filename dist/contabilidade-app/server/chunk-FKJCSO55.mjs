import './polyfills.server.mjs';
import{a as ie,b as ae,c as se}from"./chunk-GRJVBQXF.mjs";import{f as j,g as q,h as J,j as W,l as H,n as K,o as Q,p as te,q as oe}from"./chunk-33JHTNE7.mjs";import{A as $,B as ee,D as ne,d as V,e as g,g as T,h as E,k as F,m as I,n as O,p as D,r as A,s as k,t as G,u as L}from"./chunk-BUTXK5IO.mjs";import{c as re}from"./chunk-VCIU2FCS.mjs";import{ia as U,ja as X,ka as Y,la as Z}from"./chunk-3JIOLUJM.mjs";import"./chunk-NYVSB7IF.mjs";import"./chunk-QUFSXYYJ.mjs";import{$ as l,Ab as m,Ad as P,Bd as y,Fd as M,Ia as i,Ib as v,Jb as c,Je as R,Ke as B,Lc as N,Pa as _,Rc as S,Va as z,Yb as b,bb as o,ja as u,ka as f,pb as t,qb as s,rb as d,sb as x,tb as h,vb as C,yb as w}from"./chunk-S6SYAES4.mjs";import"./chunk-RZ33QJ22.mjs";import"./chunk-S6KH3LOX.mjs";function me(n,r){if(n&1&&d(0,"nz-alert",20),n&2){let e=m(2);o("nzMessage",e.error())}}function ce(n,r){if(n&1){let e=C();x(0),t(1,"h2",9),c(2,"Definir Nova Senha"),s(),t(3,"p",10),c(4,"Crie uma nova senha para sua conta"),s(),z(5,me,1,1,"nz-alert",11),t(6,"form",12),w("ngSubmit",function(){u(e);let a=m();return f(a.onSubmit())}),t(7,"nz-form-item")(8,"nz-form-control",13)(9,"nz-input-group",14),d(10,"input",15),t(11,"span",16),w("click",function(){u(e);let a=m();return f(a.passwordVisible=!a.passwordVisible)}),s()()()(),t(12,"nz-form-item")(13,"nz-form-control",17)(14,"nz-input-group",14),d(15,"input",18),t(16,"span",16),w("click",function(){u(e);let a=m();return f(a.confirmPasswordVisible=!a.confirmPasswordVisible)}),s()()()(),t(17,"button",19),c(18," Atualizar Senha "),s()(),h()}if(n&2){let e=m();i(5),o("ngIf",e.error()),i(),o("formGroup",e.passwordForm),i(4),o("type",e.passwordVisible?"text":"password"),i(),o("nzType",e.passwordVisible?"eye-invisible":"eye"),i(4),o("type",e.confirmPasswordVisible?"text":"password"),i(),o("nzType",e.confirmPasswordVisible?"eye-invisible":"eye"),i(),o("nzLoading",e.isLoading())("disabled",e.passwordForm.invalid)}}function le(n,r){n&1&&(t(0,"nz-result",21)(1,"div",22)(2,"button",23),c(3,"Ir para Login"),s()()())}var pe=class n{authService=l(re);authStore=l(M);router=l(P);fb=l(D);passwordForm;updateSuccess=!1;passwordVisible=!1;confirmPasswordVisible=!1;isLoading=this.authStore.isLoading;error=this.authStore.error;constructor(){this.passwordForm=this.fb.group({password:["",[g.required,g.minLength(6)]],confirmPassword:["",[g.required]]},{validators:this.passwordMatchValidator})}passwordMatchValidator(r){let e=r.get("password")?.value,p=r.get("confirmPassword")?.value;return e!==p?(r.get("confirmPassword")?.setErrors({mismatch:!0}),{mismatch:!0}):null}onSubmit(){if(this.passwordForm.invalid){Object.values(this.passwordForm.controls).forEach(e=>{e.invalid&&(e.markAsDirty(),e.updateValueAndValidity({onlySelf:!0}))});return}let{password:r}=this.passwordForm.value;this.authService.updatePassword(r).subscribe({next:()=>{this.updateSuccess=!0},error:()=>{}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=_({type:n,selectors:[["app-new-password"]],decls:11,vars:3,consts:[["successTemplate",""],[1,"new-password-container"],["nz-row","","nzJustify","center","nzAlign","middle",1,"h-100"],["nz-col",""],[1,"new-password-card",3,"nzBordered"],[1,"logo-container"],["nz-icon","","nzType","audit","nzTheme","outline",1,"logo-icon"],[1,"app-name"],[4,"ngIf","ngIfElse"],[1,"new-password-title"],[1,"new-password-subtitle"],["nzType","error","nzShowIcon","","class","mb-4",3,"nzMessage",4,"ngIf"],["nz-form","",3,"ngSubmit","formGroup"],["nzErrorTip","A senha deve ter pelo menos 6 caracteres"],["nzPrefixIcon","lock"],["nz-input","","formControlName","password","placeholder","Nova Senha",3,"type"],["nz-icon","",1,"password-icon",3,"click","nzType"],["nzErrorTip","As senhas n\xE3o coincidem"],["nz-input","","formControlName","confirmPassword","placeholder","Confirmar Nova Senha",3,"type"],["nz-button","","nzType","primary","nzBlock","",1,"update-button",3,"nzLoading","disabled"],["nzType","error","nzShowIcon","",1,"mb-4",3,"nzMessage"],["nzStatus","success","nzTitle","Senha atualizada com sucesso!","nzSubTitle","Sua senha foi alterada. Agora voc\xEA pode fazer login com sua nova senha."],["nz-result-extra",""],["nz-button","","nzType","primary","routerLink","/auth/login"]],template:function(e,p){if(e&1&&(t(0,"div",1)(1,"div",2)(2,"div",3)(3,"nz-card",4)(4,"div",5),d(5,"span",6),t(6,"h1",7),c(7,"Contabilidade App"),s()(),z(8,ce,19,8,"ng-container",8)(9,le,4,0,"ng-template",null,0,b),s()()()()),e&2){let a=v(10);i(3),o("nzBordered",!1),i(5),o("ngIf",!p.updateSuccess)("ngIfElse",a)}},dependencies:[S,N,A,F,V,T,E,I,O,y,W,G,k,q,j,J,Q,H,K,Z,Y,U,X,ee,$,oe,te,B,R,L,ne,se,ae,ie],styles:[".new-password-container[_ngcontent-%COMP%]{min-height:100vh;background-color:#f0f2f5;display:flex;align-items:center;justify-content:center;padding:16px}.h-100[_ngcontent-%COMP%]{height:100%}.new-password-card[_ngcontent-%COMP%]{width:100%;max-width:400px;border-radius:8px;box-shadow:0 2px 8px #00000017;padding:24px}.logo-container[_ngcontent-%COMP%]{text-align:center;margin-bottom:24px}.logo-icon[_ngcontent-%COMP%]{font-size:48px;color:#1890ff;margin-bottom:8px}.app-name[_ngcontent-%COMP%]{font-size:24px;color:#000000d9;margin-bottom:0}.new-password-title[_ngcontent-%COMP%]{font-size:24px;color:#000000d9;font-weight:600;text-align:center;margin-bottom:8px}.new-password-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#00000073;text-align:center;margin-bottom:40px}.update-button[_ngcontent-%COMP%]{height:40px;font-size:16px;margin-bottom:24px}.password-icon[_ngcontent-%COMP%]{cursor:pointer;color:#999}.mb-4[_ngcontent-%COMP%]{margin-bottom:16px}@media (max-width: 480px){.new-password-card[_ngcontent-%COMP%]{padding:16px}.new-password-title[_ngcontent-%COMP%], .app-name[_ngcontent-%COMP%]{font-size:20px}.logo-icon[_ngcontent-%COMP%]{font-size:36px}.new-password-subtitle[_ngcontent-%COMP%]{margin-bottom:24px}}"]})};export{pe as NewPasswordComponent};
